# link against system's libdarktable instead of building it
# seems to work

--- src/CMakeLists.txt
+++ src/CMakeLists.txt
@@ -176,16 +176,6 @@
 
 
 
-FILE(GLOB DTIncludes external/darktable/src/common/*.h external/darktable/src/develop/*.h)
-FILE(GLOB DTSources external/darktable/src/common/*.c external/darktable/src/develop/masks/*.c)
-
-add_library (pfdt STATIC
-  ${DTIncludes}
-  ${DTSources}
-)
-
-SET_TARGET_PROPERTIES(pfdt PROPERTIES COMPILE_FLAGS "-I${CMAKE_SOURCE_DIR}/src/dt -std=gnu99")
-
 
 FILE(GLOB BaseIncludes version.hh base/*.hh)
 if (AUTOMATED_VERSION_CHECK)
@@ -428,7 +418,7 @@
   pfgui
   pfbase 
   pfgmic
-  pfdt
+  darktable
   ${STATIC_LIBS}
   ${TIFF_LIBRARIES} ${PNG_LIBRARIES} ${JPEG_LIBRARIES} ${LCMS2_LIBRARIES} 
   ${VIPS_LIBRARIES} ${VIPSCC_LIBRARIES}
