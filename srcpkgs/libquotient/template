# Template file for 'libquotient'
pkgname=libquotient
version=0.6.4
revision=1
wrksrc="libQuotient-${version}"
build_style=cmake
configure_args="-DBUILD_SHARED_LIBS=ON -DQuotient_INSTALL_TESTS=OFF"
# e2e is experimental, requires qtolm
#configure_args+=" -DQuotient_ENABLE_E2EE=ON"
makedepends="qt5-devel qt5-multimedia-devel"
short_desc="Qt5 library to write cross-platform clients for Matrix"
maintainer="Piraty <piraty1@inbox.ru>"
license="LGPL-2.1-or-later"
homepage="https://github.com/quotient-im/libQuotient"
distfiles="https://github.com/quotient-im/libQuotient/archive/${version}.tar.gz"
checksum=4c43a68c144d41e3826f2e1ce006760129694b79d8d7f302dea81328c6a663ce

post_build() {
	rm -f /usr/share/ndk-modules/Android.mk
}

libquotient-devel_package() {
	short_desc+=" - development files"
	depends="${sourcepkg}>=${version}_${revision}"
		pkg_install() {
			vmove usr/include
			vmove "usr/lib/*.so"
			vmove usr/lib/cmake
			vmove usr/lib/pkgconfig
		}
}
