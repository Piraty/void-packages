# Template file for 'vips'
pkgname=vips
version=8.9.0
revision=1
wrksrc=libvips-${version}
build_style=gnu-configure
build_helper="qemu"
hostmakedepends="automake autogen libtool pkg-config gtk-doc
 gobject-introspection glib-devel prelink-cross"
makedepends="glib-devel librsvg-devel giflib-devel libgsf-devel fftw-devel
 libjpeg-turbo-devel libpng-devel libexif-devel libmagick-devel"
short_desc="Fast image processing library with low memory needs"
maintainer="Piraty <piraty1@inbox.ru>"
license="LGPL-2.1-or-later"
homepage="https://libvips.github.io/libvips/"
distfiles="https://github.com/libvips/libvips/archive/v${version}.tar.gz"
checksum=da14ba61bede36a04f1e5ee5db7f46eaafce99235014247db63f5f057336b054

pre_configure() {
	./autogen.sh
}

libvips_package() {
	short_desc+=" - runtime libraries"
		pkg_install() {
			vmove "usr/lib/*.so.*"
	}
}

libvips-devel_package() {
	short_desc+=" - development files"
		depends="libvips>=${version}_${revision} $makedepends"
		pkg_install() {
			vmove usr/include
			vmove usr/lib/pkgconfig
			vmove "usr/lib/*.a"
			vmove "usr/lib/*.so"
	}
}
